[gd_scene load_steps=9 format=3]

[ext_resource type="Script" path="res://scenes/game.gd" id="1_game"]
[ext_resource type="Texture2D" uid="uid://c8e86pmrwbub4" path="res://maps/backgrounds/SnowMountainsSky.png" id="2_sky"]
[ext_resource type="Texture2D" uid="uid://clrgqk3axa7vv" path="res://maps/backgrounds/arcticmountains.png" id="3_mountains"]
[ext_resource type="Script" path="res://maps/parallax_bg.gd" id="4_parallax"]
[ext_resource type="PackedScene" path="res://objects/player/player.tscn" id="5_player"]
[ext_resource type="PackedScene" path="res://objects/timeline/timeline.tscn" id="6_timeline"]
[ext_resource type="PackedScene" path="res://objects/popup/event_popup.tscn" id="7_popup"]
[ext_resource type="PackedScene" path="res://scenes/end_screen.tscn" id="8_end"]

[sub_resource type="Shader" id="Shader_scroll"]
code = "shader_type canvas_item;
uniform vec2 direction = vec2(1.0, 0.0);
uniform float speed = 0.1;
void fragment() {
	COLOR = texture(TEXTURE, UV + (direction * TIME * speed));
}"

[sub_resource type="ShaderMaterial" id="ShaderMaterial_slow"]
shader = SubResource("Shader_scroll")
shader_parameter/direction = Vector2(1, 0)
shader_parameter/speed = 0.05

[sub_resource type="ShaderMaterial" id="ShaderMaterial_fast"]
shader = SubResource("Shader_scroll")
shader_parameter/direction = Vector2(1, 0)
shader_parameter/speed = 0.12

[node name="Game" type="Node2D"]
script = ExtResource("1_game")

[node name="Background" type="ParallaxBackground" parent="."]
script = ExtResource("4_parallax")

[node name="SkyLayer" type="ParallaxLayer" parent="Background"]
motion_scale = Vector2(0.2, 1)
motion_mirroring = Vector2(1152, 0)

[node name="Sky" type="TextureRect" parent="Background/SkyLayer"]
texture_repeat = 2
material = SubResource("ShaderMaterial_slow")
offset_right = 1152.0
offset_bottom = 648.0
texture = ExtResource("2_sky")
expand_mode = 2

[node name="MountainLayer" type="ParallaxLayer" parent="Background"]
motion_scale = Vector2(0.5, 1)
motion_mirroring = Vector2(1152, 0)

[node name="Mountains" type="TextureRect" parent="Background/MountainLayer"]
texture_repeat = 2
material = SubResource("ShaderMaterial_fast")
offset_right = 1152.0
offset_bottom = 648.0
texture = ExtResource("3_mountains")
expand_mode = 2

[node name="Player" parent="." instance=ExtResource("5_player")]
position = Vector2(250, 180)

[node name="Timeline" parent="." instance=ExtResource("6_timeline")]

[node name="EventPopup" parent="." instance=ExtResource("7_popup")]

[node name="EndScreen" parent="." instance=ExtResource("8_end")]

[node name="Music" type="AudioStreamPlayer" parent="."]
volume_db = -10.0
