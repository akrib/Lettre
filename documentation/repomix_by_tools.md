This file is a merged representation of the entire codebase, combining all repository files into a single document.
Generated by Repomix on: 2026-02-11 08:19:33

# File Summary

## Purpose:

This file contains a packed representation of the entire repository's contents.
It is designed to be easily consumable by AI systems for analysis, code review,
or other automated processes.

## File Format:

The content is organized as follows:
1. This summary section
2. Repository information
3. Repository structure
4. Multiple file entries, each consisting of:
   a. A header with the file path (## File: path/to/file)
   b. The full contents of the file in a code block

## Usage Guidelines:

- This file should be treated as read-only. Any changes should be made to the
  original repository files, not this packed version.
- When processing this file, use the file path to distinguish
  between different files in the repository.
- Be aware that this file may contain sensitive information. Handle it with
  the same level of security as you would the original repository.

## Notes:

- Some files may have been excluded based on .gitignore rules and Repomix's
  configuration.
- Binary files are not included in this packed representation. Please refer to
  the Repository Structure section for a complete list of file paths, including
  binary files.
- Code comments have been removed.

## Additional Information:

For more information about Repomix, visit: https://github.com/andersonby/python-repomix


# Repository Structure

```
maps
  parallax_bg.gd
objects
  player
    player.gd
    player.tscn
  player_fly_tux
    player.gd
    player.tscn
  popup
    event_popup.gd
    event_popup.tscn
  timeline
    timeline.gd
    timeline.tscn
scenes
  end_screen.gd
  end_screen.tscn
  game.gd
  game.tscn
  title_screen.gd
  title_screen.tscn
```

# Repository Files


## maps/parallax_bg.gd

```text
extends ParallaxBackground
## Fond parallaxe qui défile avec la timeline.
## Les couches les plus éloignées défilent plus lentement.

@export var auto_scroll := true


func _process(delta: float) -> void:
	if not auto_scroll or Global.is_paused:
		return

	# Le ParallaxBackground gère automatiquement les ratios de vitesse
	# via motion_scale de chaque ParallaxLayer.
	scroll_offset.x -= Global.scroll_speed * delta
```

## objects/player/player.gd

```text
extends CharacterBody2D
## Avion en papier contrôlé par le joueur.
## Machine à états : FLYING → LOOPING → DIVING → GROUNDED → RISING → FLYING

enum State { FLYING, LOOPING, DIVING, GROUNDED, RISING }

# --- Paramètres ajustables depuis l'éditeur ---
@export_group("Vol")
@export var flight_altitude := 180.0          ## Hauteur de croisière (depuis le haut)
@export var bob_amplitude := 12.0             ## Amplitude du balancement vertical
@export var bob_frequency := 2.5              ## Fréquence du balancement

@export_group("Plongeon")
@export var loop_duration := 0.5              ## Durée du looping (secondes)
@export var dive_speed := 500.0               ## Vitesse de descente
@export var rise_speed := 200.0               ## Vitesse de remontée

@export_group("Timeline")
@export var timeline_y := 560.0               ## Position Y de la barre de timeline

# --- Signaux ---
signal dive_landed                             ## Émis quand l'avion touche la timeline
signal returned_to_flight                      ## Émis quand l'avion revient en vol

# --- Références ---
@onready var sprite: AnimatedSprite2D = $Sprite
@onready var flap_sound: AudioStreamPlayer2D = $FlapSound
@onready var dive_sound: AudioStreamPlayer2D = $DiveSound

# --- État interne ---
var state := State.FLYING
var time_alive := 0.0
var loop_timer := 0.0
var loop_start_rotation := 0.0
var _can_dive := true


func _ready() -> void:
	Global.player = self
	position.y = flight_altitude
	velocity = Vector2.ZERO
	add_to_group("players")


func _physics_process(delta: float) -> void:
	time_alive += delta

	match state:
		State.FLYING:
			_fly(delta)
		State.LOOPING:
			_loop(delta)
		State.DIVING:
			_dive(delta)
		State.GROUNDED:
			velocity = Vector2.ZERO
		State.RISING:
			_rise(delta)

	move_and_slide()


func _unhandled_input(event: InputEvent) -> void:
	if state == State.FLYING and _can_dive:
		if event.is_action_pressed("dive"):
			_start_loop()


# === ÉTATS ===

func _fly(_delta: float) -> void:
	# Balancement doux sinusoïdal
	var bob := sin(time_alive * bob_frequency) * bob_amplitude
	position.y = flight_altitude + bob

	# Légère rotation selon le mouvement vertical
	rotation = deg_to_rad(sin(time_alive * bob_frequency) * 5.0)

	velocity = Vector2.ZERO
	sprite.play("fly")


func _start_loop() -> void:
	state = State.LOOPING
	loop_timer = 0.0
	loop_start_rotation = rotation
	_can_dive = false
	if flap_sound:
		flap_sound.play()


func _loop(delta: float) -> void:
	loop_timer += delta
	var progress := clampf(loop_timer / loop_duration, 0.0, 1.0)

	# Rotation complète de 360°
	rotation = loop_start_rotation + (progress * TAU)

	# Léger mouvement vers le haut pendant le loop
	velocity.y = -80.0 * (1.0 - progress)

	# Transition vers le plongeon
	if progress >= 1.0:
		state = State.DIVING
		rotation = deg_to_rad(60.0)
		sprite.play("dive")
		if dive_sound:
			dive_sound.play()


func _dive(_delta: float) -> void:
	velocity.y = dive_speed
	# Pointer vers le bas
	rotation = lerp(rotation, deg_to_rad(70.0), 0.1)

	# Touche la barre de timeline
	if position.y >= timeline_y:
		position.y = timeline_y
		_land()


func _land() -> void:
	state = State.GROUNDED
	velocity = Vector2.ZERO
	rotation = 0.0
	sprite.play("idle")
	dive_landed.emit()


func _rise(_delta: float) -> void:
	velocity.y = -rise_speed
	rotation = lerp(rotation, deg_to_rad(-15.0), 0.05)

	if position.y <= flight_altitude:
		position.y = flight_altitude
		rotation = 0.0
		state = State.FLYING
		_can_dive = true
		sprite.play("fly")
		returned_to_flight.emit()


# === API publique ===

## Appelé après fermeture du popup pour reprendre le vol
func resume_flight() -> void:
	state = State.RISING


## Vérifie si le joueur est en vol (pour la timeline)
func is_flying() -> bool:
	return state == State.FLYING
```

## objects/player/player.tscn

```text
[gd_scene load_steps=25 format=3 uid="uid://6d4k7f6xbjji"]

[ext_resource type="Script" uid="uid://23pkxcqkiioa" path="res://objects/player/player.gd" id="1_player"]
[ext_resource type="AudioStream" uid="uid://b7rc3ykc886xe" path="res://objects/player_fly_tux/flap.ogg" id="2_flap"]
[ext_resource type="Texture2D" uid="uid://c167igeb745kc" path="res://objects/player_fly_tux/plane.png" id="2_jnjyq"]
[ext_resource type="AudioStream" uid="uid://3u5ncjrcapv4" path="res://objects/player_fly_tux/darthit.wav" id="3_dive"]

[sub_resource type="CapsuleShape2D" id="CapsuleShape2D_player"]
radius = 12.0
height = 50.0

[sub_resource type="AtlasTexture" id="AtlasTexture_ov1q7"]
atlas = ExtResource("2_jnjyq")
region = Rect2(3, 35, 51, 35)

[sub_resource type="AtlasTexture" id="AtlasTexture_dnlh5"]
atlas = ExtResource("2_jnjyq")
region = Rect2(3, 35, 51, 35)

[sub_resource type="AtlasTexture" id="AtlasTexture_hs3hd"]
atlas = ExtResource("2_jnjyq")
region = Rect2(54, 35, 51, 35)

[sub_resource type="AtlasTexture" id="AtlasTexture_d0jni"]
atlas = ExtResource("2_jnjyq")
region = Rect2(105, 35, 51, 35)

[sub_resource type="AtlasTexture" id="AtlasTexture_lfyt0"]
atlas = ExtResource("2_jnjyq")
region = Rect2(156, 35, 51, 35)

[sub_resource type="AtlasTexture" id="AtlasTexture_7x4h0"]
atlas = ExtResource("2_jnjyq")
region = Rect2(3, 70, 51, 35)

[sub_resource type="AtlasTexture" id="AtlasTexture_ynx4q"]
atlas = ExtResource("2_jnjyq")
region = Rect2(156, 35, 51, 35)

[sub_resource type="AtlasTexture" id="AtlasTexture_11v68"]
atlas = ExtResource("2_jnjyq")
region = Rect2(105, 35, 51, 35)

[sub_resource type="AtlasTexture" id="AtlasTexture_otp4b"]
atlas = ExtResource("2_jnjyq")
region = Rect2(54, 35, 51, 35)

[sub_resource type="AtlasTexture" id="AtlasTexture_wdhic"]
atlas = ExtResource("2_jnjyq")
region = Rect2(3, 35, 51, 35)

[sub_resource type="AtlasTexture" id="AtlasTexture_k61kb"]
atlas = ExtResource("2_jnjyq")
region = Rect2(156, 0, 51, 35)

[sub_resource type="AtlasTexture" id="AtlasTexture_xs6b8"]
atlas = ExtResource("2_jnjyq")
region = Rect2(105, 0, 51, 35)

[sub_resource type="AtlasTexture" id="AtlasTexture_rsegs"]
atlas = ExtResource("2_jnjyq")
region = Rect2(54, 0, 51, 35)

[sub_resource type="AtlasTexture" id="AtlasTexture_b7jbk"]
atlas = ExtResource("2_jnjyq")
region = Rect2(3, 0, 51, 35)

[sub_resource type="AtlasTexture" id="AtlasTexture_3jm3y"]
atlas = ExtResource("2_jnjyq")
region = Rect2(54, 0, 51, 35)

[sub_resource type="AtlasTexture" id="AtlasTexture_2s3sh"]
atlas = ExtResource("2_jnjyq")
region = Rect2(105, 0, 51, 35)

[sub_resource type="AtlasTexture" id="AtlasTexture_1a48y"]
atlas = ExtResource("2_jnjyq")
region = Rect2(156, 0, 51, 35)

[sub_resource type="AtlasTexture" id="AtlasTexture_oi0eh"]
atlas = ExtResource("2_jnjyq")
region = Rect2(156, 0, 51, 35)

[sub_resource type="SpriteFrames" id="SpriteFrames_gnkmh"]
animations = [{
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_ov1q7")
}],
"loop": true,
"name": &"default",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_dnlh5")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_dnlh5")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_dnlh5")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_dnlh5")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_hs3hd")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_d0jni")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_lfyt0")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_7x4h0")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_ynx4q")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_11v68")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_otp4b")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_dnlh5")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_dnlh5")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_dnlh5")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_wdhic")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_k61kb")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_xs6b8")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_rsegs")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_b7jbk")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_3jm3y")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_2s3sh")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_1a48y")
}],
"loop": true,
"name": &"dive",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_dnlh5")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_dnlh5")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_dnlh5")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_dnlh5")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_hs3hd")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_d0jni")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_lfyt0")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_7x4h0")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_ynx4q")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_11v68")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_otp4b")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_dnlh5")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_dnlh5")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_dnlh5")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_wdhic")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_k61kb")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_xs6b8")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_rsegs")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_b7jbk")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_3jm3y")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_2s3sh")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_1a48y")
}],
"loop": true,
"name": &"fly",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_oi0eh")
}],
"loop": false,
"name": &"idle",
"speed": 5.0
}]

[node name="Player" type="CharacterBody2D" groups=["players"]]
z_index = 20
script = ExtResource("1_player")

[node name="CollisionShape2D" type="CollisionShape2D" parent="."]
rotation = 1.5708
shape = SubResource("CapsuleShape2D_player")

[node name="Sprite" type="AnimatedSprite2D" parent="."]
texture_filter = 1
position = Vector2(2, 0)
scale = Vector2(4, 4)
sprite_frames = SubResource("SpriteFrames_gnkmh")
animation = &"fly"
speed_scale = 1.2

[node name="FlapSound" type="AudioStreamPlayer2D" parent="."]
stream = ExtResource("2_flap")
volume_db = 3.0

[node name="DiveSound" type="AudioStreamPlayer2D" parent="."]
stream = ExtResource("3_dive")
volume_db = 1.0
```

## objects/player_fly_tux/player.gd

```text
extends CharacterBody2D


@export var gravity = 9.0
@export var flap_force: int = -6
@onready var sprite = $Sprite
@onready var display_size = get_viewport().get_visible_rect().size

var dead = false
var max_speed = 400
var rotation_speed = 2
var data = {
	"chamallow": 0,
	"current_chamallow": 0,
	"total_chamallow": 0,
	"max_dist": 0,
	"nb_run": 0,
	"total_dist" : 0, 
	"upgrade_list": [1,1,1,1,1,
					1,1,1,1,1,
					1,1,1,1,1,
					1,1,1,1,1,
					1,1,1,1,1,
					1,1,1,1,1,1]
}


func _ready():
	Global.player = self
	velocity = Vector2.ZERO
	

func _physics_process(delta):
	if dead:
		return
		
	velocity.y += gravity * delta
	
	if velocity.y > max_speed:
		velocity.y = max_speed
		
	if position.y > display_size.y + 128 || position.y < -128:
		death()
	
	move_and_collide(velocity * delta)
	rotate_bird()
	
func _input(event):
	if event.is_pressed():
		flap()
		
func flap():
	sprite.play("fly")
	$flap.stop()
	$flap.play()
	velocity.y = flap_force

func rotate_bird():
	# downwards  
	if velocity.y > 0 and rad_to_deg(rotation) < 90:
		sprite.play("fall")
		rotation += rotation_speed * deg_to_rad(0.01)
	# upwards 
	elif velocity.y < 0 and rad_to_deg(rotation) > -10:
		sprite.play("default")
		rotation -= (rotation_speed * deg_to_rad(1) * 0.2)


func death():
	#Global.score.append(current_score)
	dead = true
	$death.play()
	sprite.stop()
	gravity = 0
	velocity = Vector2.ZERO
	
func bounce():
	velocity.y = flap_force*8
	sprite.play("default")
	if velocity.y < 0 and rad_to_deg(rotation) > -20:
		rotation -= (rotation_speed * deg_to_rad(1) * 0.6)
```

## objects/player_fly_tux/player.tscn

```text
[gd_scene load_steps=25 format=3 uid="uid://p3jlda1m27pr"]

[ext_resource type="Script" path="res://objects/player_fly_tux/player.gd" id="1_u8do1"]
[ext_resource type="Texture2D" uid="uid://c167igeb745kc" path="res://objects/player_fly_tux/plane.png" id="2_gkqfo"]
[ext_resource type="AudioStream" uid="uid://b7rc3ykc886xe" path="res://objects/player_fly_tux/flap.ogg" id="3_ws5lv"]
[ext_resource type="AudioStream" uid="uid://3u5ncjrcapv4" path="res://objects/player_fly_tux/darthit.wav" id="4_rm6tg"]

[sub_resource type="CapsuleShape2D" id="CapsuleShape2D_nfgvi"]
radius = 9.0
height = 64.0

[sub_resource type="AtlasTexture" id="AtlasTexture_ov1q7"]
atlas = ExtResource("2_gkqfo")
region = Rect2(3, 35, 51, 35)

[sub_resource type="AtlasTexture" id="AtlasTexture_dnlh5"]
atlas = ExtResource("2_gkqfo")
region = Rect2(3, 35, 51, 35)

[sub_resource type="AtlasTexture" id="AtlasTexture_hs3hd"]
atlas = ExtResource("2_gkqfo")
region = Rect2(54, 35, 51, 35)

[sub_resource type="AtlasTexture" id="AtlasTexture_d0jni"]
atlas = ExtResource("2_gkqfo")
region = Rect2(105, 35, 51, 35)

[sub_resource type="AtlasTexture" id="AtlasTexture_lfyt0"]
atlas = ExtResource("2_gkqfo")
region = Rect2(156, 35, 51, 35)

[sub_resource type="AtlasTexture" id="AtlasTexture_7x4h0"]
atlas = ExtResource("2_gkqfo")
region = Rect2(3, 70, 51, 35)

[sub_resource type="AtlasTexture" id="AtlasTexture_ynx4q"]
atlas = ExtResource("2_gkqfo")
region = Rect2(156, 35, 51, 35)

[sub_resource type="AtlasTexture" id="AtlasTexture_11v68"]
atlas = ExtResource("2_gkqfo")
region = Rect2(105, 35, 51, 35)

[sub_resource type="AtlasTexture" id="AtlasTexture_otp4b"]
atlas = ExtResource("2_gkqfo")
region = Rect2(54, 35, 51, 35)

[sub_resource type="AtlasTexture" id="AtlasTexture_wdhic"]
atlas = ExtResource("2_gkqfo")
region = Rect2(3, 35, 51, 35)

[sub_resource type="AtlasTexture" id="AtlasTexture_k61kb"]
atlas = ExtResource("2_gkqfo")
region = Rect2(156, 0, 51, 35)

[sub_resource type="AtlasTexture" id="AtlasTexture_xs6b8"]
atlas = ExtResource("2_gkqfo")
region = Rect2(105, 0, 51, 35)

[sub_resource type="AtlasTexture" id="AtlasTexture_rsegs"]
atlas = ExtResource("2_gkqfo")
region = Rect2(54, 0, 51, 35)

[sub_resource type="AtlasTexture" id="AtlasTexture_b7jbk"]
atlas = ExtResource("2_gkqfo")
region = Rect2(3, 0, 51, 35)

[sub_resource type="AtlasTexture" id="AtlasTexture_3jm3y"]
atlas = ExtResource("2_gkqfo")
region = Rect2(54, 0, 51, 35)

[sub_resource type="AtlasTexture" id="AtlasTexture_2s3sh"]
atlas = ExtResource("2_gkqfo")
region = Rect2(105, 0, 51, 35)

[sub_resource type="AtlasTexture" id="AtlasTexture_1a48y"]
atlas = ExtResource("2_gkqfo")
region = Rect2(156, 0, 51, 35)

[sub_resource type="AtlasTexture" id="AtlasTexture_oi0eh"]
atlas = ExtResource("2_gkqfo")
region = Rect2(156, 0, 51, 35)

[sub_resource type="SpriteFrames" id="SpriteFrames_hm1hv"]
animations = [{
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_ov1q7")
}],
"loop": true,
"name": &"default",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_dnlh5")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_dnlh5")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_dnlh5")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_dnlh5")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_hs3hd")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_d0jni")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_lfyt0")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_7x4h0")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_ynx4q")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_11v68")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_otp4b")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_dnlh5")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_dnlh5")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_dnlh5")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_wdhic")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_k61kb")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_xs6b8")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_rsegs")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_b7jbk")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_3jm3y")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_2s3sh")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_1a48y")
}],
"loop": true,
"name": &"fall",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_oi0eh")
}],
"loop": false,
"name": &"fly",
"speed": 5.0
}]

[node name="player" type="CharacterBody2D" groups=["players"]]
script = ExtResource("1_u8do1")

[node name="CollisionShape2D" type="CollisionShape2D" parent="."]
position = Vector2(11, 8)
rotation = 1.5708
shape = SubResource("CapsuleShape2D_nfgvi")

[node name="Sprite" type="AnimatedSprite2D" parent="."]
texture_filter = 1
position = Vector2(1, 0)
scale = Vector2(2, 2)
sprite_frames = SubResource("SpriteFrames_hm1hv")
animation = &"fall"
speed_scale = 1.2

[node name="flap" type="AudioStreamPlayer2D" parent="."]
stream = ExtResource("3_ws5lv")
volume_db = 5.503

[node name="death" type="AudioStreamPlayer2D" parent="."]
stream = ExtResource("4_rm6tg")
```

## objects/popup/event_popup.gd

```text
extends CanvasLayer
## Popup affichant les photos et le texte d'un événement de la timeline.
## S'ouvre quand l'avion touche la barre, se ferme au clic/touche.

signal popup_closed

@onready var panel: PanelContainer = $Panel
@onready var photos_container: HBoxContainer = $Panel/MarginContainer/VBoxContainer/PhotosContainer
@onready var date_label: Label = $Panel/MarginContainer/VBoxContainer/DateLabel
@onready var description_label: Label = $Panel/MarginContainer/VBoxContainer/DescriptionLabel
@onready var hint_label: Label = $Panel/MarginContainer/VBoxContainer/HintLabel
@onready var anim: AnimationPlayer = $AnimationPlayer

var _is_open := false
var _allow_close := false


func _ready() -> void:
	panel.visible = false
	layer = 10


func _unhandled_input(event: InputEvent) -> void:
	if not _is_open or not _allow_close:
		return

	if event is InputEventScreenTouch and event.pressed:
		close()
	elif event is InputEventKey and event.pressed:
		close()
	elif event is InputEventMouseButton and event.pressed:
		close()


# === Affichage ===

func show_event(event_data: Dictionary) -> void:
	_clear_photos()

	# Date et titre
	var date_text: String = event_data.get("date", "")
	var title_text: String = event_data.get("title", "")
	date_label.text = "%s — %s" % [date_text, title_text] if title_text else date_text

	# Description
	description_label.text = event_data.get("description", "")

	# Photos
	var photos: Array = event_data.get("photos", [])
	for photo_path in photos:
		_add_photo(photo_path)

	# Indication pour fermer
	hint_label.text = "Appuie pour continuer..."

	# Ouvrir avec animation
	panel.visible = true
	panel.modulate = Color(1, 1, 1, 0)
	_is_open = true
	_allow_close = false

	if anim:
		anim.play("show")
		await anim.animation_finished

	# Petit délai avant de pouvoir fermer (évite la fermeture accidentelle)
	await get_tree().create_timer(0.4).timeout
	_allow_close = true


func close() -> void:
	if not _is_open:
		return

	_is_open = false
	_allow_close = false

	if anim:
		anim.play("hide")
		await anim.animation_finished

	panel.visible = false
	popup_closed.emit()


# === Gestion des photos ===

func _clear_photos() -> void:
	for child in photos_container.get_children():
		child.queue_free()


func _add_photo(path: String) -> void:
	if not ResourceLoader.exists(path):
		push_warning("[Popup] Photo introuvable : %s" % path)
		# Placeholder gris
		var placeholder := ColorRect.new()
		placeholder.color = Color(0.3, 0.3, 0.3, 0.5)
		placeholder.custom_minimum_size = Vector2(180, 140)
		photos_container.add_child(placeholder)
		return

	var texture := load(path) as Texture2D
	if not texture:
		return

	var tex_rect := TextureRect.new()
	tex_rect.texture = texture
	tex_rect.expand_mode = TextureRect.EXPAND_FIT_WIDTH_PROPORTIONAL
	tex_rect.stretch_mode = TextureRect.STRETCH_KEEP_ASPECT_CENTERED
	tex_rect.custom_minimum_size = Vector2(180, 140)
	photos_container.add_child(tex_rect)
```

## objects/popup/event_popup.tscn

```text
[gd_scene load_steps=4 format=3]

[ext_resource type="Script" path="res://objects/popup/event_popup.gd" id="1_popup"]

[sub_resource type="Animation" id="Animation_show"]
resource_name = "show"
length = 0.4
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Panel:modulate")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.4),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [Color(1, 1, 1, 0), Color(1, 1, 1, 1)]
}

[sub_resource type="Animation" id="Animation_hide"]
resource_name = "hide"
length = 0.3
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Panel:modulate")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.3),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [Color(1, 1, 1, 1), Color(1, 1, 1, 0)]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_popup"]
_data = {
"show": SubResource("Animation_show"),
"hide": SubResource("Animation_hide")
}

[node name="EventPopup" type="CanvasLayer"]
script = ExtResource("1_popup")

[node name="Panel" type="PanelContainer" parent="."]
visible = false
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
offset_left = 80.0
offset_top = 60.0
offset_right = -80.0
offset_bottom = -60.0
grow_horizontal = 2
grow_vertical = 2

[node name="MarginContainer" type="MarginContainer" parent="Panel"]
layout_mode = 2
theme_override_constants/margin_left = 20
theme_override_constants/margin_top = 15
theme_override_constants/margin_right = 20
theme_override_constants/margin_bottom = 15

[node name="VBoxContainer" type="VBoxContainer" parent="Panel/MarginContainer"]
layout_mode = 2
theme_override_constants/separation = 12

[node name="DateLabel" type="Label" parent="Panel/MarginContainer/VBoxContainer"]
layout_mode = 2
theme_override_font_sizes/font_size = 22
horizontal_alignment = 1

[node name="PhotosContainer" type="HBoxContainer" parent="Panel/MarginContainer/VBoxContainer"]
layout_mode = 2
size_flags_vertical = 3
theme_override_constants/separation = 10
alignment = 1

[node name="DescriptionLabel" type="Label" parent="Panel/MarginContainer/VBoxContainer"]
layout_mode = 2
theme_override_font_sizes/font_size = 18
horizontal_alignment = 1
vertical_alignment = 1
autowrap_mode = 2

[node name="HintLabel" type="Label" parent="Panel/MarginContainer/VBoxContainer"]
layout_mode = 2
theme_override_font_sizes/font_size = 12
theme_override_colors/font_color = Color(0.7, 0.7, 0.7, 0.6)
horizontal_alignment = 1
text = "Appuie pour continuer..."

[node name="AnimationPlayer" type="AnimationPlayer" parent="."]
libraries = {
"": SubResource("AnimationLibrary_popup")
}
```

## objects/timeline/timeline.gd

```text
extends Node2D
## Génère et fait défiler la timeline à partir des données JSON.
## La timeline est une barre horizontale en bas de l'écran avec des panneaux
## (comme des panneaux de signalisation) qui dépassent, montrant les dates.
## Entre deux panneaux, le texte de l'événement associé au panneau de gauche.

@export_group("Apparence")
@export var bar_height := 6.0                  ## Épaisseur de la barre
@export var bar_color := Color(1, 1, 1, 0.7)  ## Couleur de la barre
@export var bar_y := 570.0                     ## Position Y de la barre
@export var sign_post_height := 55.0           ## Hauteur du poteau du panneau
@export var sign_panel_color := Color(0.2, 0.15, 0.35, 0.9)
@export var sign_text_color := Color.WHITE
@export var event_text_color := Color(0.9, 0.9, 0.85, 0.8)

@export_group("Espacement")
@export var sign_spacing := 500.0              ## Distance entre deux panneaux
@export var start_offset := 600.0              ## Décalage initial (les panneaux arrivent par la droite)

# --- Signaux ---
signal event_zone_entered(event_index: int)    ## Le joueur est au-dessus d'une zone

# --- Données internes ---
var events: Array[Dictionary] = []
var sign_nodes: Array[Node2D] = []
var is_scrolling := true
var _active_event_index := -1

@onready var display_size := get_viewport().get_visible_rect().size


func _ready() -> void:
	events = Global.timeline_events
	_build_timeline()


func _process(delta: float) -> void:
	if not is_scrolling or Global.is_paused:
		return

	var speed := Global.scroll_speed * delta

	for sign_node in sign_nodes:
		sign_node.position.x -= speed

	_update_active_zone()


# === CONSTRUCTION DE LA TIMELINE ===

func _build_timeline() -> void:
	if events.is_empty():
		push_warning("[Timeline] Aucun événement à afficher.")
		return

	for i in events.size():
		var sign_node := _create_sign(events[i], i)
		sign_node.position.x = start_offset + (i * sign_spacing)
		sign_node.position.y = bar_y
		add_child(sign_node)
		sign_nodes.append(sign_node)

	# Panneau de fin
	var end_sign := _create_end_sign()
	end_sign.position.x = start_offset + (events.size() * sign_spacing)
	end_sign.position.y = bar_y
	add_child(end_sign)
	sign_nodes.append(end_sign)


func _create_sign(event: Dictionary, index: int) -> Node2D:
	var root := Node2D.new()
	root.name = "Sign_%d" % index
	root.set_meta("event_index", index)

	# --- Segment de barre horizontal ---
	var bar_segment := ColorRect.new()
	bar_segment.size = Vector2(sign_spacing, bar_height)
	bar_segment.position = Vector2(0, -bar_height / 2.0)
	bar_segment.color = bar_color
	root.add_child(bar_segment)

	# --- Poteau vertical ---
	var post := Line2D.new()
	post.add_point(Vector2(0, 0))
	post.add_point(Vector2(0, -sign_post_height))
	post.width = 3.0
	post.default_color = Color.WHITE
	root.add_child(post)

	# --- Panneau (fond) ---
	var panel_bg := ColorRect.new()
	var panel_width := 100.0
	var panel_h := 28.0
	panel_bg.size = Vector2(panel_width, panel_h)
	panel_bg.position = Vector2(-panel_width / 2.0, -sign_post_height - panel_h)
	panel_bg.color = sign_panel_color
	root.add_child(panel_bg)

	# --- Bordure du panneau ---
	var border := ReferenceRect.new()
	border.size = panel_bg.size
	border.position = panel_bg.position
	border.border_color = Color.WHITE
	border.border_width = 2.0
	border.editor_only = false
	root.add_child(border)

	# --- Date sur le panneau ---
	var date_label := Label.new()
	date_label.text = event.get("date", "???")
	date_label.horizontal_alignment = HORIZONTAL_ALIGNMENT_CENTER
	date_label.size = Vector2(panel_width - 8, panel_h)
	date_label.position = Vector2(-panel_width / 2.0 + 4, -sign_post_height - panel_h + 2)
	date_label.add_theme_font_size_override("font_size", 13)
	date_label.add_theme_color_override("font_color", sign_text_color)
	date_label.vertical_alignment = VERTICAL_ALIGNMENT_CENTER
	root.add_child(date_label)

	# --- Texte de l'événement sur la barre ---
	var title_label := Label.new()
	title_label.text = event.get("title", "")
	title_label.position = Vector2(15, -30)
	title_label.add_theme_font_size_override("font_size", 14)
	title_label.add_theme_color_override("font_color", event_text_color)
	title_label.autowrap_mode = TextServer.AUTOWRAP_WORD
	title_label.size = Vector2(sign_spacing - 40, 25)
	root.add_child(title_label)

	# --- Zone de détection (Area2D pour savoir quel événement est actif) ---
	var area := Area2D.new()
	area.name = "TriggerZone"
	area.collision_layer = 2
	area.collision_mask = 1
	area.set_meta("event_index", index)

	var collision := CollisionShape2D.new()
	var shape := RectangleShape2D.new()
	shape.size = Vector2(sign_spacing * 0.9, 150.0)
	collision.shape = shape
	collision.position = Vector2(sign_spacing * 0.45, -75.0)
	area.add_child(collision)

	area.body_entered.connect(_on_trigger_zone_body_entered.bind(index))
	root.add_child(area)

	return root


func _create_end_sign() -> Node2D:
	var root := Node2D.new()
	root.name = "Sign_End"

	# Poteau
	var post := Line2D.new()
	post.add_point(Vector2(0, 0))
	post.add_point(Vector2(0, -sign_post_height))
	post.width = 3.0
	post.default_color = Color.GOLD
	root.add_child(post)

	# Panneau cœur
	var panel_bg := ColorRect.new()
	var pw := 50.0
	var ph := 28.0
	panel_bg.size = Vector2(pw, ph)
	panel_bg.position = Vector2(-pw / 2.0, -sign_post_height - ph)
	panel_bg.color = Color(0.7, 0.1, 0.2, 0.9)
	root.add_child(panel_bg)

	var heart_label := Label.new()
	heart_label.text = "♥"
	heart_label.horizontal_alignment = HORIZONTAL_ALIGNMENT_CENTER
	heart_label.size = Vector2(pw, ph)
	heart_label.position = panel_bg.position
	heart_label.add_theme_font_size_override("font_size", 18)
	heart_label.add_theme_color_override("font_color", Color.WHITE)
	heart_label.vertical_alignment = VERTICAL_ALIGNMENT_CENTER
	root.add_child(heart_label)

	return root


# === DÉTECTION DE ZONE ACTIVE ===

func _update_active_zone() -> void:
	# Le joueur est à une position X fixe, on cherche quel panneau est sous lui
	if not Global.player:
		return

	var player_x := Global.player.global_position.x

	for i in sign_nodes.size() - 1:  # -1 pour exclure le panneau de fin
		var sign_x := sign_nodes[i].global_position.x
		var next_x := sign_x + sign_spacing

		if player_x >= sign_x and player_x < next_x:
			if _active_event_index != i:
				_active_event_index = i
				event_zone_entered.emit(i)
			return

	_active_event_index = -1


func _on_trigger_zone_body_entered(body: Node2D, event_index: int) -> void:
	if body.is_in_group("players"):
		_active_event_index = event_index


# === API ===

func get_active_event_index() -> int:
	return _active_event_index


func get_active_event() -> Dictionary:
	if _active_event_index >= 0 and _active_event_index < events.size():
		return events[_active_event_index]
	return {}


func pause() -> void:
	is_scrolling = false


func resume() -> void:
	is_scrolling = true
```

## objects/timeline/timeline.tscn

```text
[gd_scene load_steps=2 format=3]

[ext_resource type="Script" path="res://objects/timeline/timeline.gd" id="1_timeline"]

[node name="Timeline" type="Node2D"]
z_index = 5
script = ExtResource("1_timeline")

[node name="Bar" type="ColorRect" parent="."]
offset_right = 1152.0
offset_bottom = 6.0
color = Color(1, 1, 1, 0.7)
```

## scenes/end_screen.gd

```text
extends CanvasLayer
## Écran de fin — affiche le message final d'amour quand toute la timeline
## a été parcourue.

@onready var message_label: Label = $Panel/MarginContainer/VBoxContainer/MessageLabel
@onready var anim: AnimationPlayer = $AnimationPlayer


func _ready() -> void:
	layer = 20


func show_message(text: String) -> void:
	message_label.text = text

	if anim:
		anim.play("fade_in")
```

## scenes/end_screen.tscn

```text
[gd_scene load_steps=4 format=3]

[ext_resource type="Script" path="res://scenes/end_screen.gd" id="1_end"]

[sub_resource type="Animation" id="Animation_fadein"]
resource_name = "fade_in"
length = 3.0
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Panel:modulate")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 2.0, 3.0),
"transitions": PackedFloat32Array(1, 1, 1),
"update": 0,
"values": [Color(1, 1, 1, 0), Color(1, 1, 1, 0), Color(1, 1, 1, 1)]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_end"]
_data = {
"fade_in": SubResource("Animation_fadein")
}

[node name="EndScreen" type="CanvasLayer"]
visible = false
script = ExtResource("1_end")

[node name="Panel" type="PanelContainer" parent="."]
modulate = Color(1, 1, 1, 0)
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2

[node name="MarginContainer" type="MarginContainer" parent="Panel"]
layout_mode = 2
theme_override_constants/margin_left = 60
theme_override_constants/margin_top = 40
theme_override_constants/margin_right = 60
theme_override_constants/margin_bottom = 40

[node name="VBoxContainer" type="VBoxContainer" parent="Panel/MarginContainer"]
layout_mode = 2
alignment = 1

[node name="MessageLabel" type="Label" parent="Panel/MarginContainer/VBoxContainer"]
layout_mode = 2
theme_override_font_sizes/font_size = 36
text = "..."
horizontal_alignment = 1
vertical_alignment = 1
autowrap_mode = 2

[node name="AnimationPlayer" type="AnimationPlayer" parent="."]
libraries = {
"": SubResource("AnimationLibrary_end")
}
```

## scenes/game.gd

```text
extends Node2D
## Scène principale du jeu.
## Orchestre le joueur, la timeline, le popup et la musique.

@onready var player: CharacterBody2D = $Player
@onready var timeline: Node2D = $Timeline
@onready var popup: CanvasLayer = $EventPopup
@onready var music: AudioStreamPlayer = $Music
@onready var end_screen: CanvasLayer = $EndScreen

var songs: Array[String] = [
	"res://music/airship_2.ogg",
	"res://music/arctic_breeze.ogg",
	"res://music/chipdisko.ogg",
	"res://music/jewels.ogg",
]

var _current_event_index := -1
var _events_visited: Array[int] = []
var _game_finished := false


func _ready() -> void:
	Global.is_paused = false
	Global.save_data["total_flights"] += 1

	_setup_music()
	_connect_signals()

	if end_screen:
		end_screen.visible = false


func _setup_music() -> void:
	songs.shuffle()
	var stream = load(songs[0])
	if stream:
		music.stream = stream
		music.volume_db = -10
		music.play()


func _connect_signals() -> void:
	# Quand l'avion plonge et touche la timeline
	player.dive_landed.connect(_on_player_dive_landed)
	player.returned_to_flight.connect(_on_player_returned)

	# Quand la zone de timeline change
	timeline.event_zone_entered.connect(_on_event_zone_entered)

	# Quand le popup se ferme
	popup.popup_closed.connect(_on_popup_closed)


# === Réactions aux signaux ===

func _on_event_zone_entered(event_index: int) -> void:
	_current_event_index = event_index


func _on_player_dive_landed() -> void:
	# Pause le défilement
	Global.is_paused = true
	timeline.pause()

	# Récupère l'événement actif
	var event_data: Dictionary = timeline.get_active_event()
	if event_data.is_empty():
		# Pas d'événement ici, on remonte directement
		_resume_after_popup()
		return

	# Marque comme vu
	var idx: int = timeline.get_active_event_index()
	Global.mark_event_seen(idx)

	if idx not in _events_visited:
		_events_visited.append(idx)

	# Affiche le popup
	popup.show_event(event_data)


func _on_popup_closed() -> void:
	_resume_after_popup()


func _resume_after_popup() -> void:
	# Vérifie si c'était le dernier événement
	if _events_visited.size() >= Global.timeline_events.size() and not _game_finished:
		_show_end_screen()
		return

	Global.is_paused = false
	timeline.resume()
	player.resume_flight()


func _on_player_returned() -> void:
	# L'avion est revenu en altitude, tout continue
	pass


# === Fin du jeu ===

func _show_end_screen() -> void:
	_game_finished = true

	if end_screen:
		end_screen.visible = true
		# Le end_screen gère son propre affichage du message final
		if end_screen.has_method("show_message"):
			end_screen.show_message(Global.timeline_end_message)

	# Fade out la musique
	var tween := create_tween()
	tween.tween_property(music, "volume_db", -80.0, 3.0)


# === Input global ===

func _input(event: InputEvent) -> void:
	if _game_finished:
		if event is InputEventScreenTouch or event is InputEventKey or event is InputEventMouseButton:
			if event.is_pressed():
				get_tree().change_scene_to_file("res://scenes/title_screen.tscn")
```

## scenes/game.tscn

```text
[gd_scene load_steps=9 format=3]

[ext_resource type="Script" path="res://scenes/game.gd" id="1_game"]
[ext_resource type="Texture2D" uid="uid://c8e86pmrwbub4" path="res://maps/backgrounds/SnowMountainsSky.png" id="2_sky"]
[ext_resource type="Texture2D" uid="uid://clrgqk3axa7vv" path="res://maps/backgrounds/arcticmountains.png" id="3_mountains"]
[ext_resource type="Script" path="res://maps/parallax_bg.gd" id="4_parallax"]
[ext_resource type="PackedScene" path="res://objects/player/player.tscn" id="5_player"]
[ext_resource type="PackedScene" path="res://objects/timeline/timeline.tscn" id="6_timeline"]
[ext_resource type="PackedScene" path="res://objects/popup/event_popup.tscn" id="7_popup"]
[ext_resource type="PackedScene" path="res://scenes/end_screen.tscn" id="8_end"]

[sub_resource type="Shader" id="Shader_scroll"]
code = "shader_type canvas_item;
uniform vec2 direction = vec2(1.0, 0.0);
uniform float speed = 0.1;
void fragment() {
	COLOR = texture(TEXTURE, UV + (direction * TIME * speed));
}"

[sub_resource type="ShaderMaterial" id="ShaderMaterial_slow"]
shader = SubResource("Shader_scroll")
shader_parameter/direction = Vector2(1, 0)
shader_parameter/speed = 0.05

[sub_resource type="ShaderMaterial" id="ShaderMaterial_fast"]
shader = SubResource("Shader_scroll")
shader_parameter/direction = Vector2(1, 0)
shader_parameter/speed = 0.12

[node name="Game" type="Node2D"]
script = ExtResource("1_game")

[node name="Background" type="ParallaxBackground" parent="."]
script = ExtResource("4_parallax")

[node name="SkyLayer" type="ParallaxLayer" parent="Background"]
motion_scale = Vector2(0.2, 1)
motion_mirroring = Vector2(1152, 0)

[node name="Sky" type="TextureRect" parent="Background/SkyLayer"]
texture_repeat = 2
material = SubResource("ShaderMaterial_slow")
offset_right = 1152.0
offset_bottom = 648.0
texture = ExtResource("2_sky")
expand_mode = 2

[node name="MountainLayer" type="ParallaxLayer" parent="Background"]
motion_scale = Vector2(0.5, 1)
motion_mirroring = Vector2(1152, 0)

[node name="Mountains" type="TextureRect" parent="Background/MountainLayer"]
texture_repeat = 2
material = SubResource("ShaderMaterial_fast")
offset_right = 1152.0
offset_bottom = 648.0
texture = ExtResource("3_mountains")
expand_mode = 2

[node name="Player" parent="." instance=ExtResource("5_player")]
position = Vector2(250, 180)

[node name="Timeline" parent="." instance=ExtResource("6_timeline")]

[node name="EventPopup" parent="." instance=ExtResource("7_popup")]

[node name="EndScreen" parent="." instance=ExtResource("8_end")]

[node name="Music" type="AudioStreamPlayer" parent="."]
volume_db = -10.0
```

## scenes/title_screen.gd

```text
extends Control
## Écran titre — affiche le nom du jeu et attend un appui pour lancer.

@onready var title_label: Label = $TitleLabel
@onready var subtitle_label: Label = $SubtitleLabel
@onready var prompt_label: Label = $PromptLabel
@onready var anim: AnimationPlayer = $AnimationPlayer
@onready var music: AudioStreamPlayer = $Music

var _can_start := false


func _ready() -> void:
	title_label.text = Global.timeline_title
	subtitle_label.text = Global.timeline_subtitle
	prompt_label.modulate = Color(1, 1, 1, 0)

	if anim:
		anim.play("intro")
		await anim.animation_finished

	_can_start = true
	_blink_prompt()


func _input(event: InputEvent) -> void:
	if not _can_start:
		return

	if event.is_pressed():
		_can_start = false
		_start_game()


func _start_game() -> void:
	if anim:
		anim.play("fade_out")
		await anim.animation_finished

	get_tree().change_scene_to_file("res://scenes/game.tscn")


func _blink_prompt() -> void:
	while _can_start:
		var tween := create_tween()
		tween.tween_property(prompt_label, "modulate:a", 1.0, 0.6)
		tween.tween_property(prompt_label, "modulate:a", 0.3, 0.6)
		await tween.finished
```

## scenes/title_screen.tscn

```text
[gd_scene load_steps=7 format=3]

[ext_resource type="Script" path="res://scenes/title_screen.gd" id="1_title"]
[ext_resource type="Texture2D" uid="uid://c8e86pmrwbub4" path="res://maps/backgrounds/SnowMountainsSky.png" id="2_sky"]
[ext_resource type="AudioStream" uid="uid://ca7j6ywp01uu4" path="res://music/jewels.ogg" id="3_music"]

[sub_resource type="Animation" id="Animation_intro"]
resource_name = "intro"
length = 2.5
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath(".:modulate")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 1.5),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [Color(1, 1, 1, 0), Color(1, 1, 1, 1)]
}

[sub_resource type="Animation" id="Animation_fadeout"]
resource_name = "fade_out"
length = 1.0
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath(".:modulate")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 1.0),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [Color(1, 1, 1, 1), Color(1, 1, 1, 0)]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("Music:volume_db")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0, 1.0),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [0.0, -80.0]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_title"]
_data = {
"intro": SubResource("Animation_intro"),
"fade_out": SubResource("Animation_fadeout")
}

[node name="TitleScreen" type="Control"]
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
script = ExtResource("1_title")

[node name="Background" type="TextureRect" parent="."]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
texture = ExtResource("2_sky")
expand_mode = 1

[node name="TitleLabel" type="Label" parent="."]
layout_mode = 1
anchors_preset = 10
anchor_right = 1.0
offset_top = 100.0
offset_bottom = 250.0
grow_horizontal = 2
theme_override_colors/font_shadow_color = Color(0, 0, 0, 1)
theme_override_colors/font_outline_color = Color(0, 0, 0, 1)
theme_override_constants/outline_size = 5
theme_override_constants/shadow_outline_size = 9
theme_override_font_sizes/font_size = 64
text = "Lettre à Béa"
horizontal_alignment = 1
vertical_alignment = 1

[node name="SubtitleLabel" type="Label" parent="."]
layout_mode = 1
anchors_preset = 10
anchor_right = 1.0
offset_top = 260.0
offset_bottom = 320.0
grow_horizontal = 2
theme_override_colors/font_shadow_color = Color(0, 0, 0, 0.5)
theme_override_colors/font_outline_color = Color(0, 0, 0, 0.5)
theme_override_constants/outline_size = 3
theme_override_font_sizes/font_size = 22
text = "Notre histoire en avions de papier"
horizontal_alignment = 1
vertical_alignment = 1

[node name="PromptLabel" type="Label" parent="."]
modulate = Color(1, 1, 1, 0)
layout_mode = 1
anchors_preset = 12
anchor_top = 1.0
anchor_right = 1.0
anchor_bottom = 1.0
offset_top = -100.0
grow_horizontal = 2
grow_vertical = 0
theme_override_colors/font_shadow_color = Color(0, 0, 0, 1)
theme_override_constants/shadow_outline_size = 5
theme_override_font_sizes/font_size = 28
text = "Appuie pour commencer"
horizontal_alignment = 1
vertical_alignment = 1

[node name="CopyrightLabel" type="Label" parent="."]
layout_mode = 1
anchors_preset = 12
anchor_top = 1.0
anchor_right = 1.0
anchor_bottom = 1.0
offset_top = -35.0
grow_horizontal = 2
grow_vertical = 0
theme_override_font_sizes/font_size = 12
theme_override_colors/font_color = Color(0.6, 0.6, 0.6, 0.5)
text = "©Akrib 2024 — GPLv3"
horizontal_alignment = 1

[node name="AnimationPlayer" type="AnimationPlayer" parent="."]
libraries = {
"": SubResource("AnimationLibrary_title")
}
autoplay = "intro"

[node name="Music" type="AudioStreamPlayer" parent="."]
stream = ExtResource("3_music")
autoplay = true
volume_db = -5.0
```

## Statistics

- Total Files: 15
- Total Characters: 43730
- Total Tokens: 0
